<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" 
			   xmlns:ns1="*"
			   xmlns:tool="view.tool.*"	
			   close="titlewindow1_closeHandler(event)"  
			   creationComplete="titlewindow1_creationCompleteHandler(event)" 
			   width="1080" height="840" fontSize="14">
	<fx:Script>
		<![CDATA[
			import com.adobe.cairngorm.control.CairngormEventDispatcher;
			
			import control.*;
			
			import locator.AmplifyLocator;
			import locator.DictLocator;
			import locator.ElectrophoresisLocator;
			import locator.ExtractLocator;
			import locator.PsbLocator;
			import locator.SysUserLocator;
			import locator.WordLocator;
			
			import mx.collections.ArrayCollection;
			import mx.collections.ArrayList;
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			import spark.components.CheckBox;
			
			import util.Helper;
			
			import vo.ExtractSampleVo;
			import vo.ExtractVo;
			
			private var Extloc:ExtractLocator=ExtractLocator.getInstance();
			private var Amploc:AmplifyLocator=AmplifyLocator.getInstance();
			private var EPloc:ElectrophoresisLocator=ElectrophoresisLocator.getInstance();
			private var chid:String="";
			
			public static var record:ArrayCollection = new ArrayCollection([  
				{id:0,label:'3130XL'},
				{id:1,label:'3500XL'},
				{id:2,label:'电泳位置表格'}]); 
			
			protected function titlewindow1_creationCompleteHandler(event:FlexEvent):void
			{
				// 页面载入
				if(Extloc.ExtractInsertFlag)
				{
					tn.removeElement(NC03);tn.removeElement(NC04);
					tn.removeElement(NC05);tn.removeElement(NC06);
				}
				else if(Amploc.AmplifyInsertFlag)
				{
					tn.removeElement(NC01);tn.removeElement(NC02);
					tn.removeElement(NC05);tn.removeElement(NC06);
				}
				else if(EPloc.EPInsertFlag)
				{
					tn.removeElement(NC01);tn.removeElement(NC02);
					tn.removeElement(NC03);tn.removeElement(NC04);
				}
			}
			protected function titlewindow1_closeHandler(event:CloseEvent):void
			{
				// 页面关闭
				Extloc.ExtractInsertFlag=false;
				Amploc.AmplifyInsertFlag=false;
				EPloc.EPInsertFlag=false;
				PopUpManager.removePopUp(this);
			}
			//************************************************************************************************************//
			//【提取】
			//************************************************************************************************************//
			protected function setTQ_clickHandler(event:MouseEvent):void
			{
				// 设置提取方法
				if(dg1.selectedItems==null)
				{
					Helper.showAlert("请选择检材！");
				}
				else
				{
					var len:int=Extloc.PureListObj.length;
					for(var i:int=0;i<dg1.selectedItems.length;i++)
					{	
						var voObj2:ExtractSampleVo=new ExtractSampleVo("","","","","","","","","","",
							"","","","","","","","","","","","","","","","","","","","","","","","","","");
						voObj2.ID=dg1.selectedItems[i].ID;
						voObj2.SLN=dg1.selectedItems[i].SLN;
						voObj2.NAME=dg1.selectedItems[i].NAME;
						voObj2.SAMPLE_TYPE=dg1.selectedItems[i].SAMPLE_TYPE;
						voObj2.TQ_METHOD=tqffset.getSelectedItem();
						voObj2.TQTJYL=dg1.selectedItems[i].TQTJYL;
						
						for(var j:int=0;j<len;j++)
						{	
							var voObj1:ExtractSampleVo=new ExtractSampleVo("","","","","","","","","","",
								"","","","","","","","","","","","","","","","","","","","","","","","","","");
							voObj1.ID=Extloc.PureListObj.getItemAt(j).ID;
							if(voObj1.ID==voObj2.ID)
							{
								Extloc.PureListObj.setItemAt(voObj2,j);
								continue;
							}
						}
					}
				}
			}
			protected function setYL_clickHandler(event:MouseEvent):void
			{
				// 设置提取用量
				if(dg1.selectedItems==null)
				{
					Helper.showAlert("请选择检材！");
				}
				else
				{
					var len:int=Extloc.PureListObj.length;
					for(var i:int=0;i<dg1.selectedItems.length;i++)
					{	
						var voObj2:ExtractSampleVo=new ExtractSampleVo("","","","","","","","","","",
							"","","","","","","","","","","","","","","","","","","","","","","","","","");
						voObj2.ID=dg1.selectedItems[i].ID;				
						voObj2.SLN=dg1.selectedItems[i].SLN;
						voObj2.NAME=dg1.selectedItems[i].NAME;
						voObj2.SAMPLE_TYPE=dg1.selectedItems[i].SAMPLE_TYPE;
						voObj2.TQ_METHOD=dg1.selectedItems[i].TQ_METHOD;
						voObj2.TQTJYL=tqyl.text;
						
						for(var j:int=0;j<len;j++)
						{	
							var voObj1:ExtractSampleVo=new ExtractSampleVo("","","","","","","","","","",
								"","","","","","","","","","","","","","","","","","","","","","","","","","");
							voObj1.ID=Extloc.PureListObj.getItemAt(j).ID;
							if(voObj1.ID==voObj2.ID)
							{
								Extloc.PureListObj.setItemAt(voObj2,j);
								continue;
							}
						}
					}
				}
			}
			protected function ExtractSave(event:MouseEvent):void
			{
				//提取信息 保存				
				var arr1:Array=new Array();
				arr1[0]=Extloc.curObj.ID;//提取ID
				arr1[1]=tqph.text;//提取批号
				arr1[2]=lxj.getSelectedItems();//离心机
				arr1[3]=yyq.getSelectedItems();//移液器
				arr1[4]=jry.getSelectedItems();//加热仪
				arr1[5]=hwhyy.getSelectedItems();//恒温混匀仪
				arr1[6]=xwhhq.getSelectedItems();//漩涡混合器
				arr1[7]=sy.getSelectedItems();//水浴
				arr1[8]=xwj.getSelectedItems();//显微镜
				arr1[9]=gzz.getSelectedItems();//工作站
				arr1[10]=SysUserLocator.getInstance().loginUser.ID;//提取人
				arr1[11]=syrq.text;//日期
				arr1[12]=PsbLocator.getInstance().idPsb.ID;//鉴定单位
				arr1[13]="0";//工作站模式
				arr1[14]="0";//提取确认	
				Extloc.ExtractRecordArray=arr1;
				
				var extractNum=Extloc.PureListObj.length;
				var arr:Array=new Array();
				for(var i:int=0;i<extractNum;i++)
				{
					var voObj:ExtractSampleVo=Extloc.PureListObj.getItemAt(i) as ExtractSampleVo;
					
					arr.push(new Array());
					arr[i][0]=voObj.ID;//ID
					arr[i][1]=voObj.TQ_METHOD;//提取方法
					arr[i][2]=voObj.TQTJYL;//提取用量
				}
				Extloc.ExtractArray=arr;
				
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.EXTRACTWS_UpdateExtract));			
				tn.selectedIndex=1;
				//延时设置
				setTimeout(QueryPure, 500);
			}
			protected function PureSave(event:MouseEvent):void
			{
				//纯化信息 保存
				if(dg2.selectedItem==null)
				{
					Helper.showAlert("请选择检材！");
				}
				else
				{
					var n:int=0;
					var m:int=0;
					for(var j:int=0;j<dg2.selectedItems.length;j++)
					{
						var voObj:ExtractSampleVo=dg2.selectedItems[j] as ExtractSampleVo;
						if(voObj.CH_ID.length>0)n++;
						else m++;
					}
					if(n>0&&m>0)	
					{
						Helper.showAlert("请勿将已纯化的检材与为纯化的检材同时进行操作！");
						return;
					}
					if(dg2.selectedItem.CH_ID==""||dg2.selectedItem.CH_ID==null)
					{
						chid=Helper.getGUID();
					}
					else
					{
						chid=dg2.selectedItem.CH_ID;
					}
					
					var pureNum=dg2.selectedItems.length;
					var arr:Array=new Array();
					for(var i:int=0;i<pureNum;i++)
					{
						var voObj:ExtractSampleVo=dg2.selectedItems[i] as ExtractSampleVo;
						
						arr.push(new Array());
						arr[i][0]=voObj.CASE_ID;//案件ID
						arr[i][1]=voObj.CONNO;//委托编号
						arr[i][2]=voObj.SC;//库类型
						arr[i][3]=voObj.SLN;//样本编号
						arr[i][4]=voObj.NAME;//样本名称
						arr[i][5]=voObj.SAMPLE_TYPE;//样本类型
						arr[i][6]=voObj.TQ_ID;//提取记录ID
					}
					Extloc.PureArray=arr;
					
					var arr1:Array=new Array();
					arr1[0]=chid;//纯化ID
					arr1[1]=lxj0.getSelectedItems();//纯化离心机
					arr1[2]=yyq0.getSelectedItems();//纯化移液器
					arr1[3]=jry0.getSelectedItems();//纯化加热仪
					arr1[4]=hwhyy0.getSelectedItems();//纯化恒温混匀仪
					arr1[5]=xwhhq0.getSelectedItems();//纯化漩涡混合器
					arr1[6]=sy0.getSelectedItems();//纯化水浴
					arr1[7]=xwj0.getSelectedItems();//纯化显微镜
					arr1[8]=gzz0.getSelectedItems();//纯化工作站
					arr1[9]=chff.getSelectedItem();//纯化方法
					arr1[10]=SysUserLocator.getInstance().loginUser.ID;//纯化人
					arr1[11]=syrq.text;//日期
					arr1[12]=PsbLocator.getInstance().idPsb.ID;//鉴定单位
					
					Extloc.PureRecordArray=arr1;
					
					if(dg2.selectedItem.CH_ID==""||dg2.selectedItem.CH_ID==null)
					{
						CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.EXTRACTWS_InsertPure));
					}
					else
					{
						CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.EXTRACTWS_UpdatePure));
					}
					//延时设置
					setTimeout(QueryPure, 500);
				}	
			}
			
			protected function QueryPure():void
			{
				// 刷新 纯化记录
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.EXTRACTWS_QueryPure));
			}
			
			protected function PrintTQRecord_clickHandler(event:MouseEvent):void
			{
				// 打印提取记录表
				WordLocator.getInstance().FileName="DNA提取记录表.doc";
				WordLocator.getInstance().wordType="doc";
				WordLocator.getInstance().RecordType="提取记录";
				WordLocator.getInstance().RecordID=Extloc.curObj.ID;
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.WORDWS_PrintSampleTestRecord));
			}
			protected function tqff_changeHandler():void
			{
				//提取方法 更换
				TiquClear();		
				
				var list:ArrayList=DictLocator.getInstance().getItem("提取方法默认设置");
				
				for(var i:int=0;i<list.length;i++)
				{
					var Item:String=list.getItemAt(i).label;
					var ff:Array=Item.split("@");
					
					if(ff[0]==tqff.selectedData)
					{
						var yq:Array=ff[1].split("￥");
						
						for(var j:int=0;j<yq.length;j++)
						{
							var mc:Array=yq[j].split("|");
							
							if(mc[0]=="提取离心机")CheckBoxSet(lxj,"提取离心机",mc);
							else if(mc[0]=="移液器")CheckBoxSet(yyq,"移液器",mc);
							else if(mc[0]=="加热仪")CheckBoxSet(jry,"加热仪",mc);
							else if(mc[0]=="恒温混匀仪")CheckBoxSet(hwhyy,"恒温混匀仪",mc);
							else if(mc[0]=="提取漩涡混合器")CheckBoxSet(xwhhq,"提取漩涡混合器",mc);
							else if(mc[0]=="水浴")CheckBoxSet(sy,"水浴",mc);
							else if(mc[0]=="显微镜")CheckBoxSet(xwj,"显微镜",mc);
							else if(mc[0]=="提取工作站")CheckBoxSet(gzz,"提取工作站",mc);							
						}
					}	
				}
			}
			protected function chff_changeHandler():void
			{
				//纯化方法 更换
				chunhuaClear();		
				
				var list:ArrayList=DictLocator.getInstance().getItem("纯化方法默认设置");
				
				for(var i:int=0;i<list.length;i++)
				{
					var Item:String=list.getItemAt(i).label;
					var ff:Array=Item.split("@");
					
					if(ff[0]==chff.getSelectedItem())
					{
						var yq:Array=ff[1].split("￥");
						
						for(var j:int=0;j<yq.length;j++)
						{
							var mc:Array=yq[j].split("|");
							
							if(mc[0]=="提取离心机")CheckBoxSet(lxj0,"提取离心机",mc);
							else if(mc[0]=="移液器")CheckBoxSet(yyq0,"移液器",mc);
							else if(mc[0]=="加热仪")CheckBoxSet(jry0,"加热仪",mc);
							else if(mc[0]=="恒温混匀仪")CheckBoxSet(hwhyy0,"恒温混匀仪",mc);
							else if(mc[0]=="提取漩涡混合器")CheckBoxSet(xwhhq0,"提取漩涡混合器",mc);
							else if(mc[0]=="水浴")CheckBoxSet(sy0,"水浴",mc);
							else if(mc[0]=="显微镜")CheckBoxSet(xwj0,"显微镜",mc);
							else if(mc[0]=="提取工作站")CheckBoxSet(gzz0,"提取工作站",mc);							
						}
					}	
				}
			}	
			private function TiquClear():void
			{
				//提取设置 清空
				CheckBoxClear(lxj,"提取离心机");
				CheckBoxClear(yyq,"移液器");
				CheckBoxClear(jry,"加热仪");
				CheckBoxClear(hwhyy,"恒温混匀仪");
				CheckBoxClear(xwhhq,"提取漩涡混合器");
				CheckBoxClear(sy,"水浴");
				CheckBoxClear(xwj,"显微镜");
				CheckBoxClear(gzz,"提取工作站");	
			}
			private function chunhuaClear():void
			{
				//纯化设置 清空
				CheckBoxClear(lxj0,"提取离心机");
				CheckBoxClear(yyq0,"移液器");
				CheckBoxClear(jry0,"加热仪");
				CheckBoxClear(hwhyy0,"恒温混匀仪");
				CheckBoxClear(xwhhq0,"提取漩涡混合器");
				CheckBoxClear(sy0,"水浴");
				CheckBoxClear(xwj0,"显微镜");
				CheckBoxClear(gzz0,"提取工作站");	
			}
			//************************************************************************************************************//
			//【扩增】
			//************************************************************************************************************//
			
			protected function saveKz():void
			{
				//扩增仪器 保存
				Amploc.wsObj.KZDYPH=PH.text;//扩增批号
				Amploc.wsObj.KZFF=kzff.selectedData;//扩增方法
				Amploc.wsObj.SJHPH=sjhph.text;//试剂盒批号
				Amploc.wsObj.KZSJKS=kzsjs.text;//扩增时间开始
				Amploc.wsObj.KZSJJS=kzsje.text;//扩增时间结束
				Amploc.wsObj.KZY=kzy.getSelectedItems();//扩增仪
				Amploc.wsObj.KZLXJ=kzlxj.getSelectedItems();//扩增离心机
				Amploc.wsObj.KZYYQ=kzyyq.getSelectedItems();//扩增移液器
				Amploc.wsObj.KZXWHHQ=kzxwhhq.getSelectedItems();//扩增漩涡混合器
				Amploc.wsObj.KZCJT=cjt.getSelectedItems();//扩增超净台
				Amploc.wsObj.KZGZZ=kzgzz.getSelectedItems();//扩增工作站
				Amploc.wsObj.ZKYB=zkyb.getSelectedItems();//质控样本
				Amploc.wsObj.KZTX=kztx.text;//扩增体系
				Amploc.wsObj.KZMB=kzmb.text;//扩增模板
				Amploc.wsObj.XHS=xhs.text;//循环数
				Amploc.wsObj.HJWD=hjwd.text;//环境温度
				Amploc.wsObj.HJSD=hjsd.text;//环境湿度			
				tn.selectedIndex+=1;
			}		
			protected function yangKZ_clickHandler(jrzkyb:String):void
			{
				// 加入阳极质控样本
				EPloc.SampleEPListObj.addItem(new ExtractSampleVo("","",
					"","","",jrzkyb,"","","","1","",
					"","","","","","","","","","","","","","","","","","","","","","","","1",""));	
			}
			protected function KZ_SAVE_clickHandler(event:MouseEvent):void
			{
				//扩增样本 保存
				Alert.show("是否确认提交信息？","温馨提示",Alert.YES|Alert.CANCEL,this,saveKZ_handler,null,Alert.CANCEL); 
			}
			private function saveKZ_handler(evt:CloseEvent):void
			{	
				if(evt.detail==Alert.YES)
				{
					var arr1:Array=new Array();
					arr1[0]=EPloc.curObj.ID;//扩增ID
					arr1[1]=Amploc.wsObj.KZDYPH;//扩增批号
					arr1[2]=Amploc.wsObj.KZY;//扩增仪
					arr1[3]=Amploc.wsObj.KZLXJ;//扩增离心机
					arr1[4]=Amploc.wsObj.KZYYQ;//扩增移液器
					arr1[5]=Amploc.wsObj.KZXWHHQ;//扩增漩涡混合器
					arr1[6]=Amploc.wsObj.KZCJT;//扩增超净台
					arr1[7]=Amploc.wsObj.KZGZZ;//扩增工作站			
					arr1[8]=Amploc.wsObj.KZSJKS;//扩增时间开始
					arr1[9]=Amploc.wsObj.KZSJJS;//扩增时间结束
					arr1[10]=Amploc.wsObj.KZFF;//扩增方法
					arr1[11]=Amploc.wsObj.SJHPH;//试剂盒批号		
					arr1[12]=Amploc.wsObj.KZTX;//扩增体系
					arr1[13]=Amploc.wsObj.KZMB;//扩增模板
					arr1[14]=Amploc.wsObj.XHS;//循环数
					arr1[15]=Amploc.wsObj.HJWD;//环境温度
					arr1[16]=Amploc.wsObj.HJSD;//环境湿度
					arr1[17]=Amploc.wsObj.ZKYB;//质控样本
					arr1[18]=Amploc.wsObj.ZKYBWZ;//质控样本位置
					arr1[19]=SysUserLocator.getInstance().loginUser.ID;//扩增人
					arr1[20]=PsbLocator.getInstance().idPsb.ID;//鉴定单位
					arr1[21]="0";//扩增确认
					arr1[22]=EPloc.curObj.DYTQ_ID;//对应提取记录ID
					
					Amploc.AmplifyRecordArray=arr1;
					
					var listNum=EPloc.SampleEPListObj.length;
					var arr:Array=new Array();
					for(var i:int=0;i<listNum;i++)
					{
						var voObj:ExtractSampleVo=EPloc.SampleEPListObj.getItemAt(i) as ExtractSampleVo;
						
						arr.push(new Array());
						arr[i][0]=voObj.CASE_ID;//案件ID
						arr[i][1]=voObj.CONNO;//委托编号
						arr[i][2]=voObj.SC;//库类型
						arr[i][3]=voObj.SLN;//样本编号
						arr[i][4]=voObj.NAME;//样本名称
						arr[i][5]=voObj.SAMPLE_TYPE;//样本类型
						arr[i][6]=voObj.WZ;//扩增位置
						arr[i][7]=voObj.YL;//扩增模版用量
						arr[i][8]=EPloc.curObj.ID;//扩增ID
					}
					Amploc.AmplifyArray=arr;
					
					CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.AMPLIFYWS_UpdateAmplify));	
				}
			}		
			protected function PrintKZRecord_clickHandler(event:MouseEvent):void
			{
				// 打印扩增记录表
				WordLocator.getInstance().FileName="DNA扩增记录表.doc";
				WordLocator.getInstance().wordType="doc";
				WordLocator.getInstance().RecordType="扩增记录";
				WordLocator.getInstance().RecordID=EPloc.curObj.ID;
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.WORDWS_PrintSampleTestRecord));
			}
			protected function kzff_changeHandler():void
			{
				//扩增
				KuoZengClear();	
				
				var list:ArrayList=DictLocator.getInstance().getItem("扩增默认设置");
				
				for(var i:int=0;i<list.length;i++)
				{
					var Item:String=list.getItemAt(i).label;
					var ff:Array=Item.split("@");
					
					if(ff[0]==kzff.selectedData)
					{
						var yq:Array=ff[1].split("￥");
						
						for(var j:int=0;j<yq.length;j++)
						{
							var mc:Array=yq[j].split("|");
							
							if(mc[0]=="扩增仪")CheckBoxSet(kzy,"扩增仪",mc);
							else if(mc[0]=="扩增离心机")CheckBoxSet(kzlxj,"扩增离心机",mc);
							else if(mc[0]=="扩增漩涡混合器")CheckBoxSet(kzxwhhq,"扩增漩涡混合器",mc);
							else if(mc[0]=="移液器")CheckBoxSet(kzyyq,"移液器",mc);
							else if(mc[0]=="超净台")CheckBoxSet(cjt,"超净台",mc);
							else if(mc[0]=="扩增工作站")CheckBoxSet(kzgzz,"扩增工作站",mc);
							else if(mc[0]=="质控样本")CheckBoxSet(zkyb,"质控样本",mc);
							else if(mc[0]=="试剂盒批号")sjhph.text=mc[1];
							else if(mc[0]=="扩增体系")kztx.text=mc[1];
							else if(mc[0]=="模板")kzmb.text=mc[1];
							else if(mc[0]=="循环数")xhs.text=mc[1];
							else if(mc[0]=="环境温度")hjwd.text=mc[1];
							else if(mc[0]=="环境湿度")hjsd.text=mc[1];
						}
					}
				}	
			}	
			private function KuoZengClear():void
			{
				//扩增设置 清空
				CheckBoxClear(kzy,"扩增仪");
				CheckBoxClear(kzlxj,"扩增离心机");
				CheckBoxClear(kzxwhhq,"扩增漩涡混合器");
				CheckBoxClear(kzyyq,"移液器");
				CheckBoxClear(cjt,"超净台");
				CheckBoxClear(kzgzz,"扩增工作站");
				CheckBoxClear(zkyb,"质控样本");
				sjhph.text="";
				kztx.text="";
				kzmb.text="";
				xhs.text="";
				hjwd.text="";
				hjsd.text="";
			}
			
			//************************************************************************************************************//
			//【电泳】
			//************************************************************************************************************//
			protected function savedy():void
			{
				//电泳仪器 保存
				EPloc.wsObj.KZDYPH=dyph.text;//电泳批号
				EPloc.wsObj.DYY=dyy.getSelectedItems();//电泳仪
				EPloc.wsObj.DYLXJ=dylxj.getSelectedItems();//电泳离心机
				EPloc.wsObj.DYJRY=dyjry.getSelectedItems();//电泳加热仪
				EPloc.wsObj.DYXWHHQ=dyxwhhq.getSelectedItems();//电泳漩涡混合器
				EPloc.wsObj.DYYYQ=dyyyq.getSelectedItems();//电泳移液器
				EPloc.wsObj.DYZBJ=zbj.getSelectedItems();//电泳制冰机
				EPloc.wsObj.DYCJT=dycjt.getSelectedItems();//电泳超净台
				EPloc.wsObj.DYGZZ=dygzz.getSelectedItems();//电泳工作站
				EPloc.wsObj.NB=nb.getSelectedItems();//内标
				EPloc.wsObj.NBL=nbl.text;//内标量
				EPloc.wsObj.JCSJKS=dysjs.text;//电泳时间开始
				EPloc.wsObj.JCSJJS=dysje.text;//电泳时间结束
				EPloc.wsObj.BXRJ=bxrj.getSelectedItems();//变性溶剂
				EPloc.wsObj.RJL=rjl.text;//溶剂量
				EPloc.wsObj.CWL=cwl.text;//产物量
				EPloc.wsObj.JY=jy.text;//胶液
				EPloc.wsObj.JYPH=jyph.text;//胶液批号
				EPloc.wsObj.YDYDL=ydydl.text;//预电泳电流
				EPloc.wsObj.DYDL=dydl.text;//电泳电流
				EPloc.wsObj.SampleSheet=ss.text;//SampleSheet
				EPloc.wsObj.RunFold=rf.text;//RunFold
				EPloc.wsObj.DYHJWD=dywd.text;//电泳环境温度
				EPloc.wsObj.DYHJSD=dysd.text;//电泳环境湿度			
				tn.selectedIndex+=1;
			}
			protected function yangDY_clickHandler(jrzkyb:String):void
			{
				// 加入质控样本
				EPloc.SampleEPRecordListObj.addItem(new ExtractSampleVo("","",
					"","","",jrzkyb,"","","","1","",
					"","","","","","","","","","","","","","","","","","","","","","","","1",""));	
			}

			protected function DY_SAVE_clickHandler(event:MouseEvent):void
			{
				//电泳样本 保存
				Alert.show("是否确认提交信息？","温馨提示",Alert.YES|Alert.CANCEL,this,saveDY_handler,null,Alert.CANCEL); 
			}
			private function saveDY_handler(evt:CloseEvent):void
			{		
				if(evt.detail==Alert.YES)
				{
					var arr1:Array=new Array();
					arr1[0]=EPloc.curObj.ID;//电泳ID
					arr1[1]=EPloc.wsObj.KZDYPH;//电泳批号
					arr1[2]=EPloc.wsObj.DYY;//电泳仪
					arr1[3]=EPloc.wsObj.DYLXJ;//电泳离心机
					arr1[4]=EPloc.wsObj.DYJRY;//电泳加热仪
					arr1[5]=EPloc.wsObj.DYXWHHQ;//电泳漩涡混合器
					arr1[6]=EPloc.wsObj.DYYYQ;//电泳移液器
					arr1[7]=EPloc.wsObj.DYZBJ;//电泳制冰机
					arr1[8]=EPloc.wsObj.DYCJT;//电泳超净台
					arr1[9]=EPloc.wsObj.DYGZZ;//电泳工作站
					arr1[10]=EPloc.wsObj.NB;//内标
					arr1[11]=EPloc.wsObj.NBL;//内标量
					arr1[12]=EPloc.wsObj.JCSJKS;//电泳时间开始
					arr1[13]=EPloc.wsObj.JCSJJS;//电泳时间结束
					arr1[14]=EPloc.wsObj.BXRJ;//变性溶剂
					arr1[15]=EPloc.wsObj.RJL;//溶剂量
					arr1[16]=EPloc.wsObj.CWL;//产物量
					arr1[17]=EPloc.wsObj.JY;//胶液
					arr1[18]=EPloc.wsObj.JYPH;//胶液批号
					arr1[19]=EPloc.wsObj.YDYDL;//预电泳电流
					arr1[20]=EPloc.wsObj.DYDL;//电泳电流
					arr1[21]=EPloc.wsObj.SampleSheet;//SampleSheet
					arr1[22]=EPloc.wsObj.RunFold;//RunFold
					arr1[23]=EPloc.wsObj.DYHJWD;//电泳环境温度
					arr1[24]=EPloc.wsObj.DYHJSD;//电泳环境湿度
					arr1[25]=SysUserLocator.getInstance().loginUser.ID;//电泳人
					arr1[26]=PsbLocator.getInstance().idPsb.ID;//鉴定单位
					arr1[27]="0";//电泳确认
					arr1[28]=EPloc.curObj.DYKZ_ID;//对应扩增记录ID
					
					EPloc.EPRecordArray=arr1;
					
					var listNum=EPloc.SampleEPRecordListObj.length;
					var arr:Array=new Array();
					for(var i:int=0;i<listNum;i++)
					{
						var voObj:ExtractSampleVo=EPloc.SampleEPRecordListObj.getItemAt(i) as ExtractSampleVo;
						
						arr.push(new Array());
						arr[i][0]=voObj.CASE_ID;//案件ID
						arr[i][1]=voObj.CONNO;//委托编号
						arr[i][2]=voObj.SC;//库类型
						arr[i][3]=voObj.SLN;//样本编号
						arr[i][4]=voObj.NAME;//样本名称
						arr[i][5]=voObj.SAMPLE_TYPE;//样本类型
						arr[i][6]=voObj.WZ;//电泳位置
						arr[i][7]=voObj.YL;//电泳模版用量
						arr[i][8]=EPloc.curObj.ID;//电泳ID
					}
					EPloc.EPArray=arr;

					CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.ELECTROPHORESISWS_UpdateEP));		
				}
			}
			protected function PrintDYRecord_clickHandler(event:MouseEvent):void
			{
				// 打印电泳记录表
				WordLocator.getInstance().FileName="DNA电泳记录表.doc";
				WordLocator.getInstance().wordType="doc";
				WordLocator.getInstance().RecordType="电泳记录";
				WordLocator.getInstance().RecordID=EPloc.curObj.ID;
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.WORDWS_PrintSampleTestRecord));
			}
			protected function PrintPositionTable_clickHandler(type1:String,type2:String):void
			{
				// 打印电泳位置表格
				WordLocator.getInstance().FileName="样本位置表格.doc";
				WordLocator.getInstance().wordType=type2;
				WordLocator.getInstance().RecordType=type1;
				WordLocator.getInstance().RecordID=EPloc.curObj.ID;
				CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.WORDWS_PrintDNATestHelpFile));
			}
			
			protected function outRecord_clickHandler(event:MouseEvent):void
			{
				var type:String="";
				if(recordList.selectedItem.label=="电泳位置表格")type="doc";
				else type="txt";
				
				PrintPositionTable_clickHandler(recordList.selectedItem.label,type);
			}
			
			protected function dyff_changeHandler():void
			{
				DianYongClear();		
				
				var list:ArrayList=DictLocator.getInstance().getItem("电泳默认设置");
				
				for(var i:int=0;i<list.length;i++)
				{
					var Item:String=list.getItemAt(i).label;
					var ff:Array=Item.split("@");
					
					if(ff[0]==dyff.selectedData)
					{
						var yq:Array=ff[1].split("￥");
						
						for(var j:int=0;j<yq.length;j++)
						{
							var mc:Array=yq[j].split("|");
							
							if(mc[0]=="电泳仪")CheckBoxSet(dyy,"电泳仪",mc);
							else if(mc[0]=="检测离心机")CheckBoxSet(dylxj,"检测离心机",mc);
							else if(mc[0]=="加热仪")CheckBoxSet(dyjry,"加热仪",mc);
							else if(mc[0]=="检测漩涡混合器")CheckBoxSet(dyxwhhq,"检测漩涡混合器",mc);
							else if(mc[0]=="移液器")CheckBoxSet(dyyyq,"移液器",mc);
							else if(mc[0]=="制冰机")CheckBoxSet(zbj,"制冰机",mc);
							else if(mc[0]=="超净台")CheckBoxSet(dycjt,"超净台",mc);
							else if(mc[0]=="电泳工作站")CheckBoxSet(dygzz,"电泳工作站",mc);
							else if(mc[0]=="内标")CheckBoxSet(nb,"内标",mc);
							else if(mc[0]=="变性溶剂")CheckBoxSet(bxrj,"变性溶剂",mc);
							else if(mc[0]=="内标量")nbl.text=mc[1];
							else if(mc[0]=="产物量")cwl.text=mc[1];
							else if(mc[0]=="溶剂量")rjl.text=mc[1];
							else if(mc[0]=="胶液")jy.text=mc[1];
							else if(mc[0]=="胶液批号")jyph.text=mc[1];
							else if(mc[0]=="预电泳电流")ydydl.text=mc[1];
							else if(mc[0]=="电泳电流")dydl.text=mc[1];
							else if(mc[0]=="环境温度")dywd.text=mc[1];
							else if(mc[0]=="环境湿度")dysd.text=mc[1];
						}
					}
				}
			}
			private function DianYongClear():void
			{
				//电泳设置 清空
				CheckBoxClear(dyy,"电泳仪");
				CheckBoxClear(dylxj,"检测离心机");
				CheckBoxClear(dyjry,"加热仪");
				CheckBoxClear(dyxwhhq,"检测漩涡混合器");
				CheckBoxClear(dyyyq,"移液器");
				CheckBoxClear(zbj,"制冰机");
				CheckBoxClear(dycjt,"超净台");
				CheckBoxClear(dygzz,"电泳工作站");
				CheckBoxClear(nb,"内标");
				CheckBoxClear(bxrj,"变性溶剂");
				nbl.text="";
				cwl.text="";
				rjl.text="";
				jy.text="";
				jyph.text="";
				ydydl.text="";
				dydl.text="";
				dywd.text="";
				dysd.text="";
			}
			//************************************************************************************************************//
			//【公用】
			//************************************************************************************************************//
			protected function join_clickHandler(jcbh:String):void
			{
				// 检材加入
				if(jcbh.length==0)
				{
					Helper.showAlert("检材编号为空");
				}
				else
				{
					Amploc.jcbh=jcbh;
					CairngormEventDispatcher.getInstance().dispatchEvent(new IFSEvent(IFSControl.AMPLIFYWS_JoinAmplify));
				}	
			}
			protected function set_clickHandler(SPosition:String,ListObj:ArrayList):void
			{
				// 设置 扩增位置
				if(SPosition.length!=3)
				{
					Helper.showAlert("输入的起始电泳位置有误！例：A01");
					return;
				}
				var row:String=SPosition.substring(0,1).toUpperCase();
				if(("A，B，C，D，E，F，G，H").search(row)<0)
				{
					Helper.showAlert("输入的起始电泳位置有误！");
					return;
				}
				var cel:String=SPosition.substring(1,SPosition.length);
				var c:int=Number(cel);
				if(c<1||c>12)
				{
					Helper.showAlert("输入的起始电泳位置有误！");
					return;
				}
				WZ_set_handler(SPosition,ListObj);
			}
			private function WZ_set_handler(sition:String,lastList:ArrayList):void
			{
				//设置扩增位置
				var row:String=sition.substring(0,1).toUpperCase();
				var cel:String=sition.substring(1,sition.length);
				var c:int=Number(cel);
				var r:int;
				switch(row)
				{
					case "A":r=1;break;
					case "B":r=2;break;
					case "C":r=3;break;
					case "D":r=4;break;
					case "E":r=5;break;
					case "F":r=6;break;
					case "G":r=7;break;
					case "H":r=8;break;
				}
				var len:int=lastList.length;
				for(var i:int=0;i<len;i++)
				{		
					var voObj:ExtractSampleVo=lastList.getItemAt(i) as ExtractSampleVo;					
					switch(r)
					{
						case 1:row="A";r++;break;
						case 2:row="B";r++;break;
						case 3:row="C";r++;break;
						case 4:row="D";r++;break;
						case 5:row="E";r++;break;
						case 6:row="F";r++;break;
						case 7:row="G";r++;break;
						case 8:row="H";r=1;break;
					}					
					if(c>=1&&c<=9)voObj.WZ=row+"0"+String(c);
					else voObj.WZ=row+String(c);
					
					lastList.setItemAt(voObj,i);				
					if(row=="H")c++;	
				}
			}
			protected function mbyl_clickHandler(list:List,ListObj:ArrayList,MBYL:String):void
			{
				//更改 模板用量
				if(list.selectedItems==null)
					Helper.showAlert("请选择数据！");
				else
				{
					var len:int=ListObj.length;
					for(var i:int=0;i<list.selectedItems.length;i++)
					{	
						var voObj2:ExtractSampleVo=list.selectedItems[i] as ExtractSampleVo;
						voObj2.YL=MBYL;
						
						for(var j:int=0;j<len;j++)
						{	
							var voObj1:ExtractSampleVo=ListObj.getItemAt(j) as ExtractSampleVo;
							if(voObj1.WZ==voObj2.WZ)
							{
								ListObj.setItemAt(voObj2,j);
								continue;
							}
						}
					}				
				}
			}
			
			protected function removed_clickHandler(list:List,ListObj:ArrayList):void
			{
				// 移除检材
				ListObj.removeItem(list.selectedItem);
			}
			private function CheckBoxSet(id:DictCgp,Item:String,mc:Array):void
			{
				id.removeAllElements();
				var yqlist:ArrayList=DictLocator.getInstance().getItem(Item);
				
				for(var k:int=0;k<yqlist.length;k++)
				{
					var cb:CheckBox=new CheckBox();
					cb.label=yqlist.getItemAt(k).label;
					if(cb.label=="")continue;
					if(mc.length>1)cb.selected=(mc[1].search(cb.label+"，")>=0);
					id.addElement(cb);
				}
			}
			private function CheckBoxClear(id:DictCgp,Item:String):void
			{
				id.removeAllElements();
				var yqlist:ArrayList=DictLocator.getInstance().getItem(Item);
				
				for(var k:int=0;k<yqlist.length;k++)
				{
					var cb:CheckBox=new CheckBox();
					cb.label=yqlist.getItemAt(k).label;
					if(cb.label=="")continue;
					id.addElement(cb);
				}
			}
		]]>
	</fx:Script>
	<mx:TabNavigator id="tn" x="10" y="-24" width="100%" height="100%" borderVisible="false">
		<s:NavigatorContent id="NC01" width="100%" height="100%" label="提取信息">
			<s:VGroup left="10" right="10" top="10" bottom="10" gap="10">
				<s:HGroup width="813" verticalAlign="middle">
					<s:Label text="提    取   人："/>
					<s:Label width="100" text="{Extloc.curObj.TQR_NAME}"/>
					<s:Label text="提取时间："/>
					<tool:DateZh id="syrq" width="181" text="{Extloc.curObj.RQ}"/>
					<s:Spacer width="100%" height="10"/>
					<s:Label text="提取方法："/>
					<tool:DictCbb id="tqffset" width="130" dictName="提取方法"/>
					<s:Button id="setTQ" label="设置方法" click="setTQ_clickHandler(event)"/>
				</s:HGroup>
				<s:HGroup width="813" verticalAlign="middle">
					<s:Label text="提取记录号："/>
					<s:TextInput width="200" id="tqph" text="{Extloc.curObj.TQPH}"/>
					<s:HGroup verticalAlign="middle">
						<s:Label color="#FF0000" text="提取样本"/>
						<s:Label color="#ff0000" text="共"/>
						<s:Label color="#ff0000" text="{Extloc.PureListObj.length}"/>
						<s:Label color="#ff0000" text="条"/>
					</s:HGroup>
					<s:Spacer y="5" width="100%" height="14"/>
					<s:Label text="提取用量："/>
					<s:TextInput id="tqyl" width="130"/>
					<s:Button id="setYL" label="设置用量" click="setYL_clickHandler(event)"/>
				</s:HGroup>
				<mx:DataGrid id="dg1" width="813" height="100%" allowMultipleSelection="true" dataProvider="{Extloc.PureListObj}">
					<mx:columns>
						<mx:DataGridColumn dataField="SLN" headerText="样本编号"/>
						<mx:DataGridColumn dataField="NAME" headerText="样本名称"/>
						<mx:DataGridColumn dataField="SAMPLE_TYPE" headerText="样本类型"/>
						<mx:DataGridColumn dataField="TQ_METHOD" headerText="提取方法"/>
						<mx:DataGridColumn dataField="TQTJYL" headerText="提取用量"/>
					</mx:columns>
				</mx:DataGrid>
				<s:HGroup width="100%" verticalAlign="middle">
					<s:Label text="提 取 方 法："/>
					<tool:DictDdl id="tqff" width="200" dictName="提取方法"/>
					<s:Button label="读取仪器设置" click="tqff_changeHandler()"/>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="离    心   机："/>
					<tool:DictCgp id="lxj" dictName="{'提取离心机￥'+Extloc.curObj.LXJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="移    液   器："/>
					<tool:DictCgp id="yyq" dictName="{'移液器￥'+Extloc.curObj.YYQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="加    热   仪："/>
					<tool:DictCgp id="jry" dictName="{'加热仪￥'+Extloc.curObj.JRY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="恒温混匀仪："/>
					<tool:DictCgp id="hwhyy" dictName="{'恒温混匀仪￥'+Extloc.curObj.HWHYY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="漩涡混合器："/>
					<tool:DictCgp id="xwhhq" dictName="{'提取漩涡混合器￥'+Extloc.curObj.XWHHQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="水 浴/干 浴："/>
					<tool:DictCgp id="sy" dictName="{'水浴￥'+Extloc.curObj.SY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="显   微   镜："/>
					<tool:DictCgp id="xwj" dictName="{'显微镜￥'+Extloc.curObj.XWJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="85" paddingTop="6" text="工   作   站："/>
					<tool:DictCgp id="gzz" dictName="{'提取工作站￥'+Extloc.curObj.GZZ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup verticalAlign="bottom">
					<mx:Spacer width="300"/>
					<s:Button label="保存" click="ExtractSave(event)"
							  enabled="{PsbLocator.getInstance().npending}" skinClass="assets.skins.Button_bc"/>
				</s:HGroup>
			</s:VGroup>
		</s:NavigatorContent>
		<s:NavigatorContent id="NC02" width="100%" height="100%" label="纯化信息">
			<s:VGroup width="100%" height="100%">
				<s:HGroup width="813" verticalAlign="middle">
					<s:Label color="#FF0000" text="同一次纯化请多选，可按住Shift或者Ctrl多项选择保存"/>
					<s:Spacer width="100%" height="10"/>
			<!--		<mx:LinkButton label="提取记录表" textDecoration="underline" click="PrintTQRecord_clickHandler(event)"
									enabled="{PsbLocator.getInstance().npending}"/>-->
				</s:HGroup>
				<mx:DataGrid id="dg2" width="813" height="100%" allowMultipleSelection="true" dataProvider="{Extloc.PureListObj}">
					<mx:columns>
						<mx:DataGridColumn dataField="SLN" headerText="样本编号"/>
						<mx:DataGridColumn dataField="NAME" headerText="样本名称"/>
						<mx:DataGridColumn dataField="SAMPLE_TYPE" headerText="样本类型"/>
						<mx:DataGridColumn dataField="CH_METHOD" headerText="纯化方法"/>
					</mx:columns>
				</mx:DataGrid>
				<s:VGroup width="100%" visible="{dg2.selectedItem!=null}">
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="纯 化 方 法："/>
						<tool:DictCbb id="chff" width="242" dictName="纯化方法" selectedItem="{dg2.selectedItem.CH_METHOD}"
									  change="chff_changeHandler()" />
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="离   心   机 ："/>
						<tool:DictCgp id="lxj0" dictName="{'提取离心机￥'+dg2.selectedItem.CHLXJ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="移   液   器 ："/>
						<tool:DictCgp id="yyq0" dictName="{'移液器￥'+dg2.selectedItem.CHYYQ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="加   热   仪 ："/>
						<tool:DictCgp id="jry0" dictName="{'加热仪￥'+dg2.selectedItem.CHJRQ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="恒温混匀仪："/>
						<tool:DictCgp id="hwhyy0" dictName="{'恒温混匀仪￥'+dg2.selectedItem.CHHWHYY}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="漩涡混合器："/>
						<tool:DictCgp id="xwhhq0" dictName="{'提取漩涡混合器￥'+dg2.selectedItem.CHXWHHQ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="水 浴/干 浴："/>
						<tool:DictCgp id="sy0" dictName="{'水浴￥'+dg2.selectedItem.CHSY}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="显   微   镜 ："/>
						<tool:DictCgp id="xwj0" dictName="{'显微镜￥'+dg2.selectedItem.CHXWJ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Label width="85" text="工   作   站 ："/>
						<tool:DictCgp id="gzz0" dictName="{'提取工作站￥'+dg2.selectedItem.CHGZZ}">
						</tool:DictCgp>
					</s:HGroup>
					<s:HGroup width="450" horizontalAlign="right" verticalAlign="middle">
						<s:Button  skinClass="assets.skins.Button_bc" enabled="{PsbLocator.getInstance().npending}" click="PureSave(event)"/>
					</s:HGroup>
				</s:VGroup>
			</s:VGroup>
		</s:NavigatorContent>
		<s:NavigatorContent id="NC03" width="100%" height="100%" label="扩增信息">
			<s:VGroup x="10" y="10">
				<s:HGroup verticalAlign="middle">
					<s:Label width="85" text="扩增记录号："/>
					<s:TextInput id="PH" width="200" text="{EPloc.curObj.KZDYPH}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="扩 增 方 法："/>
					<tool:DictDdl id="kzff" width="200" dictName="试剂盒" selectedData="{EPloc.curObj.KZFF}"  change="kzff_changeHandler()">
					</tool:DictDdl>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="试剂盒批号："/>
					<s:TextInput id="sjhph" width="200" text="{EPloc.curObj.SJHPH}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="扩 增 时 间："/>
					<s:TextInput id="kzsjs" width="150" text="{EPloc.curObj.KZSJKS}"/>
					<s:Label paddingTop="6" text="      到     "/>
					<s:TextInput id="kzsje" width="150" text="{EPloc.curObj.KZSJJS}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="扩   增   仪 ："/>
					<tool:DictCgp id="kzy" dictName="{'扩增仪￥'+EPloc.curObj.KZY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="离   心   机 ："/>
					<tool:DictCgp id="kzlxj" dictName="{'扩增离心机￥'+EPloc.curObj.KZLXJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="漩涡混合器："/>
					<tool:DictCgp id="kzxwhhq" dictName="{'扩增漩涡混合器￥'+EPloc.curObj.KZXWHHQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="移   液   器 ："/>
					<tool:DictCgp id="kzyyq" dictName="{'移液器￥'+EPloc.curObj.KZYYQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="超   净   台 ："/>
					<tool:DictCgp id="cjt" dictName="{'超净台￥'+EPloc.curObj.KZCJT}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="工   作   站 ："/>
					<tool:DictCgp id="kzgzz" dictName="{'扩增工作站￥'+EPloc.curObj.KZGZZ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="质 控 样 本："/>
					<tool:DictCgp id="zkyb" dictName="{'质控样本￥'+EPloc.curObj.ZKYB}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="扩 增 体 系："/>
					<s:TextInput id="kztx" text="{EPloc.curObj.KZTX.length==0?'10':EPloc.curObj.KZTX}"/>
					<s:Label paddingTop="6" text="模       板："/>
					<s:TextInput id="kzmb" text="{EPloc.curObj.KZMB}"/>
					<s:Label paddingTop="6" text="循   环   数："/>
					<s:TextInput id="xhs" text="{EPloc.curObj.XHS}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="85" paddingTop="6" text="环 境 温 度："/>
					<s:TextInput id="hjwd" text="{EPloc.curObj.HJWD}"/>
					<s:Label paddingTop="6" text="环境湿度："/>
					<s:TextInput id="hjsd" text="{EPloc.curObj.HJSD}"/>
				</s:HGroup>
				<s:HGroup height="139" verticalAlign="bottom">
					<mx:Spacer width="400"/>
					<s:Button label="保存" click="saveKz()" skinClass="assets.skins.Button_bc"/>
				</s:HGroup>
			</s:VGroup>
		</s:NavigatorContent>
		<s:NavigatorContent id="NC04" width="100%" height="100%" label="样本详细信息">
			<s:VGroup left="0" right="10" top="10" bottom="10">
				<s:VGroup width="100%" height="100%">
					<s:HGroup width="100%" verticalAlign="middle">
						<s:HGroup verticalAlign="middle">
							<s:Label text="检材编号："/>
							<s:TextInput id="join_jcbh" text="{list2.selectedItem.SLN}"/>
							<s:Button label="加入检材" click="join_clickHandler(join_jcbh.text)" />
							<s:Button label="移除检材" click="removed_clickHandler(list2,EPloc.SampleEPListObj)"/>
							<s:Label color="#0000FF" text="手动加入的检材需要手动调整位置"/>
						</s:HGroup>
						<s:Spacer width="100%" height="10"/>
				<!--		<mx:LinkButton label="扩增记录表" textDecoration="underline" click="PrintKZRecord_clickHandler(event)"
									   enabled="{PsbLocator.getInstance().npending}"/>-->
					</s:HGroup>
					<s:HGroup width="960" verticalAlign="middle">
						<s:HGroup verticalAlign="middle">
							<s:Label text="质控样本："/>
							<tool:DictDdl id="zkyb2" width="148" dictName="质控样本"/>
						</s:HGroup>
						<s:Button label="加入样本" click="yangKZ_clickHandler(zkyb2.selectedData)" />
						<s:Spacer width="100%" height="10"/>
						<s:HGroup>
							<s:Label color="#ff0000" text="共"/>
							<s:Label color="#ff0000" text="{EPloc.SampleEPListObj.length}"/>
							<s:Label color="#ff0000" text="条"/>
						</s:HGroup>
						<s:Label text="起始扩增位置："/>
						<s:TextInput id="SPositionKZ" width="45" maxChars="3" restrict="A-H0-9a-h"
									 text="A01"/>
						<s:Button label="设置" click="set_clickHandler(SPositionKZ.text,EPloc.SampleEPListObj)" />
						<s:HGroup verticalAlign="middle" visible="{list2.selectedItem!=null}">
							<s:Label text="模板用量："/>
							<s:TextInput id="mbylGG" width="50"/>
							<s:Button label="更改" click="mbyl_clickHandler(list2,EPloc.SampleEPListObj,mbylGG.text)" />
						</s:HGroup>
					</s:HGroup>
					<s:VGroup width="100%" height="100%" gap="0">
						<s:HGroup width="100%" gap="0">
							<s:TextInput width="206" text="实验室编号" textAlign="center" editable="false"/>
							<s:TextInput width="236" text="物证名称" textAlign="center" editable="false"/>
							<s:TextInput width="106" text="位置" textAlign="center" editable="false"/>
							<s:TextInput width="106" text="用量" textAlign="center" editable="false"/>
							<s:TextInput width="86" text="物证类型" textAlign="center" editable="false"/>
						</s:HGroup>
						<s:List id="list2" width="100%" height="100%"
								dataProvider="{EPloc.SampleEPListObj}" dragEnabled="true" dropEnabled="true" dragMoveEnabled="true"
								itemRenderer="view.idcase.sampletest.Electrophoresis.ElectrophoresisItemRenderer" allowMultipleSelection="true"></s:List>
					</s:VGroup>
				
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Spacer width="449" height="10"/>
						<s:Label color="#FF0000" text="设置完成后，请将数据提交数据库"/>
						<s:Button label="提交信息" skinClass="assets.skins.Button_bc" click="KZ_SAVE_clickHandler(event)"/>
					</s:HGroup>
				</s:VGroup>
			</s:VGroup>
		</s:NavigatorContent>
		<s:NavigatorContent id="NC05" width="100%" height="100%" label="电泳信息">
			<s:VGroup x="10">
				<s:HGroup verticalAlign="middle">
					<s:Label width="110" text="电 泳 记 录 号 ： "/>
					<s:TextInput id="dyph" width="200" text="{EPloc.curObj.KZDYPH}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="试      剂      盒："/>
					<tool:DictDdl id="dyff" width="200" dictName="试剂盒" change="dyff_changeHandler()" selectedData="{EPloc.curObj.KZFF}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="电   泳   时   间："/>
					<s:TextInput id="dysjs" width="150" text="{EPloc.curObj.JCSJKS}"/>
					<s:Label paddingTop="6" text="    到   "/>
					<s:TextInput id="dysje" width="150" text="{EPloc.curObj.JCSJJS}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="电      泳      仪："/>
					<tool:DictCgp id="dyy" dictName="{'电泳仪￥'+EPloc.curObj.DYY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="离      心      机："/>
					<tool:DictCgp id="dylxj" dictName="{'检测离心机￥'+EPloc.curObj.DYLXJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="加      热      仪："/>
					<tool:DictCgp id="dyjry" dictName="{'加热仪￥'+EPloc.curObj.DYJRY}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="漩 涡 混 合 器 ："/>
					<tool:DictCgp id="dyxwhhq" dictName="{'检测漩涡混合器￥'+EPloc.curObj.DYXWHHQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="移      液      器："/>
					<tool:DictCgp id="dyyyq" dictName="{'移液器￥'+EPloc.curObj.DYYYQ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="制      冰      机："/>
					<tool:DictCgp id="zbj" dictName="{'制冰机￥'+EPloc.curObj.DYZBJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="超      净      台："/>
					<tool:DictCgp id="dycjt" dictName="{'超净台￥'+EPloc.curObj.DYCJT}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="工      作      站："/>
					<tool:DictCgp id="dygzz" dictName="{'电泳工作站￥'+EPloc.curObj.DYGZZ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="内                标："/>
					<tool:DictCgp id="nb" dictName="{'内标￥'+EPloc.curObj.NB}"/>
					<s:Label paddingTop="6" text="内    标   量："/>
					<s:TextInput id="nbl" text="{EPloc.curObj.NBL}"/>	
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="变   性   溶   剂："/>
					<tool:DictCgp id="bxrj" dictName="{'变性溶剂￥'+EPloc.curObj.BXRJ}">
					</tool:DictCgp>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="产      物      量："/>
					<s:TextInput id="cwl" text="{EPloc.curObj.CWL}"/>
					<s:Label width="90" paddingTop="6" text="溶    剂   量 ："/>
					<s:TextInput id="rjl" text="{EPloc.curObj.RJL}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="胶                液："/>
					<s:TextInput id="jy" text="{EPloc.curObj.JY}"/>
					<s:Label width="90" paddingTop="6" text="胶 液 批 号 ："/>
					<s:TextInput id="jyph" text="{EPloc.curObj.JYPH}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="预 电 泳 电 流 ："/>
					<s:TextInput id="ydydl" text="{EPloc.curObj.YDYDL}"/>
					<s:Label width="90" paddingTop="6" text="电 泳 电 流 ："/>
					<s:TextInput id="dydl" text="{EPloc.curObj.DYDL}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="SampleSheet ："/>
					<s:TextInput id="ss" text="{EPloc.curObj.SampleSheet}"/>
					<s:Label width="90" paddingTop="6" text="RunFold     ："/>
					<s:TextInput id="rf" text="{EPloc.curObj.RunFold}"/>
				</s:HGroup>
				<s:HGroup>
					<s:Label width="110" paddingTop="6" text="环  境  温  度  ："/>
					<s:TextInput id="dywd" text="{EPloc.curObj.DYHJWD}"/>
					<s:Label width="90" paddingTop="6" text="环 境 湿 度 ："/>
					<s:TextInput id="dysd" text="{EPloc.curObj.DYHJSD}"/>
				</s:HGroup>
				<s:HGroup height="38" horizontalAlign="left" verticalAlign="bottom">
					<mx:Spacer width="400"/>
					<s:Button label="保存" click="savedy()" skinClass="assets.skins.Button_bc"/>
				</s:HGroup>
			</s:VGroup>
		</s:NavigatorContent>
		<s:NavigatorContent id="NC06" width="100%" height="100%" label="样本详细信息">
			<s:VGroup left="0" right="10" top="10" bottom="10">
				<s:VGroup width="100%" height="100%">
					<s:HGroup width="100%" verticalAlign="middle">
						<s:HGroup verticalAlign="middle">
							<s:Label text="检材编号："/>
							<s:TextInput id="join_jcbh2" text="{list3.selectedItem.SLN}"/>
							<s:Button label="加入检材" click="join_clickHandler(join_jcbh2.text)" />
							<s:Button label="移除检材" click="removed_clickHandler(list3,EPloc.SampleEPRecordListObj)"/>
							<s:Label color="#0000FF" text="手动加入的检材需要手动调整位置"/>
						</s:HGroup>
						<s:Spacer width="100%" height="10"/>
				<!--		<mx:LinkButton label="电泳记录表" textDecoration="underline" click="PrintDYRecord_clickHandler(event)"
									   enabled="{PsbLocator.getInstance().npending}"/>-->
					</s:HGroup>
					<s:HGroup width="960" verticalAlign="middle">
						<s:HGroup verticalAlign="middle">
							<s:Label text="质控样本："/>
							<tool:DictDdl id="zkyb3" width="148" dictName="质控样本"/>
						</s:HGroup>
						<s:Button label="加入样本" click="yangDY_clickHandler(zkyb3.selectedData)" />
						<s:Spacer width="100%" height="10"/>
						<s:HGroup>
							<s:Label color="#ff0000" text="共"/>
							<s:Label color="#ff0000" text="{EPloc.SampleEPRecordListObj.length}"/>
							<s:Label color="#ff0000" text="条"/>
						</s:HGroup>
						<s:Label text="起始扩增位置："/>
						<s:TextInput id="SPositionDY" width="45" maxChars="3" restrict="A-H0-9a-h"
									 text="A01"/>
						<s:Button label="设置" click="set_clickHandler(SPositionDY.text,EPloc.SampleEPRecordListObj)" />
						<s:HGroup verticalAlign="middle" visible="{list3.selectedItem!=null}">
							<s:Label text="模板用量："/>
							<s:TextInput id="mbylGG2" width="50"/>
							<s:Button label="更改" click="mbyl_clickHandler(list3,EPloc.SampleEPRecordListObj,mbylGG2.text)" />
						</s:HGroup>
					</s:HGroup>
					<s:VGroup width="100%" height="100%" gap="0">
						<s:HGroup width="100%" gap="0">
							<s:TextInput width="206" text="实验室编号" textAlign="center" editable="false"/>
							<s:TextInput width="236" text="物证名称" textAlign="center" editable="false"/>
							<s:TextInput width="106" text="位置" textAlign="center" editable="false"/>
							<s:TextInput width="106" text="用量" textAlign="center" editable="false"/>
							<s:TextInput width="86" text="物证类型" textAlign="center" editable="false"/>
						</s:HGroup>
						<s:List id="list3" width="100%" height="100%" 
								dataProvider="{EPloc.SampleEPRecordListObj}" dragEnabled="true" dragMoveEnabled="true" dropEnabled="true"
								itemRenderer="view.idcase.sampletest.Electrophoresis.ElectrophoresisItemRenderer" allowMultipleSelection="true"></s:List>
					</s:VGroup>
					<s:HGroup width="100%" verticalAlign="middle">
						<s:Spacer width="152" height="10"/>
						<s:Label color="#FF0000" text="设置完成后，请将数据提交数据库"/>
						<s:Button label="提交信息" skinClass="assets.skins.Button_bc" click="DY_SAVE_clickHandler(event)"/>
						<s:Label text="电泳进样表："/>
						<s:DropDownList id="recordList" width="159" dataProvider="{record}" requireSelection="true"></s:DropDownList>
						<s:Button id="outRecord" label="导出" click="outRecord_clickHandler(event)"
								  enabled="{PsbLocator.getInstance().npending}"/>
						
						<!--<mx:LinkButton id="DY3130xl" label="3130XL" textDecoration="underline" click="PrintPositionTable_clickHandler(DY3130xl.label,'txt')" 
									   enabled="{PsbLocator.getInstance().npending}" />
						<mx:LinkButton id="DY3500xl" label="3500XL" textDecoration="underline" click="PrintPositionTable_clickHandler(DY3500xl.label,'txt')" 
									   enabled="{PsbLocator.getInstance().npending}" />
						<mx:LinkButton id="DYwz" label="电泳位置表格" textDecoration="underline" click="PrintPositionTable_clickHandler(DYwz.label,'doc')" 
									   enabled="{PsbLocator.getInstance().npending}" />-->
					</s:HGroup>
				</s:VGroup>
			</s:VGroup>
		</s:NavigatorContent>
	</mx:TabNavigator>
</s:TitleWindow>
